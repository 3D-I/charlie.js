<!DOCTYPE html>
<html lang="en">

  <head>
    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" type="text/css" href="//cloud.typography.com/6366632/779584/css/fonts.css" />
    <link rel="stylesheet" href="charlie.css" />

    <title>Charlie.js</title>
  </head>

  <body>

    <div id="fb-root"></div>

    <header>
      <figure>
        <img src="charlie.jpg" />
      </figure>
      <h1>Charlie.js</h1>
      <h2>Sync CSS animations with video</h2>      
      <div class="social">
        <a href="https://github.com/you"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://github-camo.global.ssl.fastly.net/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
        <a href="https://twitter.com/share" class="twitter-share-button" data-text="Sync CSS animations with video using Charlie.js" data-via="sfioritto">Tweet</a>
        <div class="fb-like" data-href="http://charliejs.org" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false"></div>
      </div>
    </header>
    <main>
      <div class="intro">
        <p>
          Charlie.js is a small, open source framework for synchronizing video and CSS3 animations.
        </p>
        <p>
          You can synchronize animations to specific times in an embedded video with an easy to use API. If the video pauses, the animations pause. 
        </p>
        <p class="button"><button>Download on GitHub</button></p>
      </div>

      <div class="summary">

        <div class="step movie">
          <h3>1. Attach to a video</h3>
          <img src="glyphicons_180_facetime_video.png" />
        </div>

        <div class="step animated">
          <h3>2. Create some animations</h3>
        </div>

        <div class="step attach">
          <h3>3. Link it with data attributes</h3>
        <pre>
&lt;div class="charlie" data-animations="bounce" data-times="40.2"&gt;</pre>

        </div>

      </div>


      <div class="demo">
        <h2>Demo</h2>
        <figure>
          <a href="http://www.sketchingwithcss.com/flexbox/"><img src="demo.png"/></a>
          <figcaption>(This will take you to another site and won't run on mobile).</figcaption>
        </figure>
      </div>

      <div class="readme">

        <h2>Documentation</h2>
        <h3>Create your CSS3 animations with the naming convention</h3>

        <p>
          The animation properties should be defined with a class selector that
          matches the name of the corresponding keyframe.
        </p>

        <pre>
.grow {
	animation-name: grow;
	animation-duration: 4s;
	animation-timing-function: linear;
	animation-iteration-count: 1;
	animation-direction: normal;
    animation-fill-mode: forwards;
}

@keyframes grow {
   0% {
       width: 5px;
       height: 5px;
   }

   100% {
       width: 50px;
       height: 50px;
   }
}</pre>

        <p>
          Notice the class name matches the animation-name matches the keyframes
          name.
        </p>
        
        <h3>Add the "charlie" class, data-animations and data-times</h3>
        
        <p>
          In your markup add a 'charlie' class to any element that you will
          animate. Then add two data attributes: data-animations and data-times.
        </p>
        
        <ul>
          <li>
            data-animations - A comma separated list of the animation names that
            will run on this element. The names should be the same as the
          class/keyframe combo in your stylesheet.</li>
          
          <li>
            data-times - A comma separated list of times when the animations
            will run. These times are synced with the video. There must be one
            time for every animation. Times are in seconds with a resolution to
            a tenth of a second.
          </li>
        </ul>

        <p>e.g.</p>

        <pre>
&lt;div class="charlie" 
data-animations="grow, shrink" data-times="40.2, 90.3"&gt;
...
&lt;/div&gt;</pre>
        
        <h3>Include the right javascript</h3>

        <p>
          Within the demo directory of this project is a charlie.js which
          contains charlie.js plus all of its dependencies. You can use this
          version if you want. Or you can include charlie.js and it's
          dependencies individually.
        </p>
         
        <p>
          You must include underscore.js and the polyfills.js file in this
          repository.
        </p>

        <h3>Make the CHARLIE.setup(video) call</h3>
         
        <p>
          Somewhere in your javascript get a reference to the video element you
          will sync with the animations. Then call CHARLIE.setup.
        </p>

        <pre>
CHARLIE.setup(video);</pre>

        <h3>Include Javascript callbacks with CHARLIE.addCallback</h3>

        <p>
          For fancier and more complicated use cases you will need more than
          just CSS3 animations. There will be other state on your page you need
          to maintain, so you can add Javascript callbacks at arbitrary times.
        </p>

        <pre>
CHARLIE.addCallback(function(){
    // do stuff in here
}, 43.2);</pre>

        <p>
          Charlie.js does a pretty good job of maintaining animation state and
          keeping everything in sync as you jump around a video, but this is not
          the case with your Javascript callbacks.
        </p>
        <p>
          As of now, if you add a bunch of callbacks that affect the state of
          the page, you will have to manually handle keeping the state in sync if a user starts jumping
          around in the video.
        </p>
        <p>
        So you will need to add event listeners to the video by
        hand. Eventually, Charlie.js might add some better mechanisms to help,
        but you're on your own for now.
        </p>

        <h3>Gotchas</h3>
        
        <ul>
          <li>
            There is a bug in Chrome where the cssRules property on a stylesheet
            is null if you load the stylesheet using the file: protocol. So
            you'll have to serve up the demo, you can't just open the file.
          </li>
          <li>
            Does not respond to framerate changes. So if the video stutters or
            you want to slow down the rate of the video, the animations will be
            out of sync.
          </li>
        </ul>
        
      </div>

      <div class="author">
        <h2>Who made this thing?</h2>
        
        <figure>
          <img src="me.jpg" alt="Sean Fioritto"></img>
        </figure>
        
        <p>
          Hey there, I'm Sean, and I'm probably a lot like you. I make stuff for the web. My web dev skills are mostly self-taught over the last decade or so and I really love what I do.
        </p>
        <p>
          I'd love to meet you on Twitter. <a href="https://twitter.com/sfioritto" class="twitter-follow-button" data-show-count="true" >Follow @sfioritto</a>
          <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </p>

      </div>

    </main>

    <!-- facebook -->
    <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <!-- end facebook -->

    <!-- twitter -->
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    <!-- end twitter -->


  </body>
</html>